<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Gene Set Collection Metadata — collectionMetadata • sparrow</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Gene Set Collection Metadata — collectionMetadata"><meta property="og:description" content="Associates key:value metadata to a gene set collection of a GeneSetDb()."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sparrow</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/sparrow.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/WIP/adding-new-methods-to-sparrow.html">Adding new methods to sparrow</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/lianos/sparrow/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Gene Set Collection Metadata</h1>
    <small class="dont-index">Source: <a href="https://github.com/lianos/sparrow/blob/HEAD/R/AllGenerics.R" class="external-link"><code>R/AllGenerics.R</code></a>, <a href="https://github.com/lianos/sparrow/blob/HEAD/R/GeneSetDb-methods.R" class="external-link"><code>R/GeneSetDb-methods.R</code></a>, <a href="https://github.com/lianos/sparrow/blob/HEAD/R/SparrowResult-methods.R" class="external-link"><code>R/SparrowResult-methods.R</code></a></small>
    <div class="hidden name"><code>collectionMetadata.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Associates key:value metadata to a gene set collection of a <code><a href="GeneSetDb-class.html">GeneSetDb()</a></code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">collectionMetadata</span><span class="op">(</span><span class="va">x</span>, <span class="va">collection</span>, <span class="va">name</span>, <span class="va">...</span><span class="op">)</span>

<span class="fu">geneSetURL</span><span class="op">(</span><span class="va">x</span>, <span class="va">i</span>, <span class="va">j</span>, <span class="va">...</span><span class="op">)</span>

<span class="fu">featureIdType</span><span class="op">(</span><span class="va">x</span>, <span class="va">i</span>, <span class="va">...</span><span class="op">)</span>

<span class="fu">featureIdType</span><span class="op">(</span><span class="va">x</span>, <span class="va">i</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span>

<span class="co"># S4 method for GeneSetDb,missing,missing</span>
<span class="fu">collectionMetadata</span><span class="op">(</span><span class="va">x</span>, <span class="va">collection</span>, <span class="va">name</span>, as.dt <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="co"># S4 method for GeneSetDb,character,missing</span>
<span class="fu">collectionMetadata</span><span class="op">(</span><span class="va">x</span>, <span class="va">collection</span>, <span class="va">name</span>, as.dt <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="co"># S4 method for GeneSetDb,character,character</span>
<span class="fu">collectionMetadata</span><span class="op">(</span><span class="va">x</span>, <span class="va">collection</span>, <span class="va">name</span>, as.dt <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="co"># S4 method for GeneSetDb</span>
<span class="fu">geneSetURL</span><span class="op">(</span><span class="va">x</span>, <span class="va">i</span>, <span class="va">j</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S4 method for GeneSetDb</span>
<span class="fu">featureIdType</span><span class="op">(</span><span class="va">x</span>, <span class="va">i</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span>

<span class="co"># S4 method for GeneSetDb</span>
<span class="fu">featureIdType</span><span class="op">(</span><span class="va">x</span>, <span class="va">i</span>, <span class="va">...</span><span class="op">)</span>

<span class="fu">addCollectionMetadata</span><span class="op">(</span>
  <span class="va">x</span>,
  <span class="va">xcoll</span>,
  <span class="va">xname</span>,
  <span class="va">value</span>,
  validate.value.fn <span class="op">=</span> <span class="cn">NULL</span>,
  allow.add <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span>

<span class="co"># S4 method for SparrowResult</span>
<span class="fu">geneSetURL</span><span class="op">(</span><span class="va">x</span>, <span class="va">i</span>, <span class="va">j</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p><code><a href="GeneSetDb-class.html">GeneSetDb()</a></code></p></dd>
<dt>collection</dt>
<dd><p>The geneset collection to to query</p></dd>
<dt>name</dt>
<dd><p>The name of the metadata variable to get the value for</p></dd>
<dt>...</dt>
<dd><p>not used yet</p></dd>
<dt>i</dt>
<dd><p>The collection,name compound key identifier of the gene set</p></dd>
<dt>j</dt>
<dd><p>The collection,name compound key identifier of the gene set</p></dd>
<dt>value</dt>
<dd><p>The value of the metadata variable</p></dd>
<dt>as.dt</dt>
<dd><p>If <code>FALSE</code> (default), the data.frame like thing that
this funciton returns will be set to a data.frame. Set this to <code>TRUE</code>
to keep this object as a <code>data.table</code></p></dd>
<dt>xcoll</dt>
<dd><p>The collection name</p></dd>
<dt>xname</dt>
<dd><p>The name of the metadata variable</p></dd>
<dt>validate.value.fn</dt>
<dd><p>If a function is provided, it is run on
<code>value</code> and msut return <code>TRUE</code> for addition to be made</p></dd>
<dt>allow.add</dt>
<dd><p>If <code>FALSE</code>, this xcoll,xname should be in the
<code>GeneSetDb</code> already, and this will fail because something is
deeply wrong with the world</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A character vector of URLs for each of the genesets identified by
<code>i, j</code>. <code>NA</code> is returned for genesets <code>i,j</code> that are not found in <code>x</code>.
The updated <code>GeneSetDb</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The design of the GeneSetDb is such that we assume that groups of gene sets
are usually defined together and will therefore share similar metadata.
These groups of gene sets will fall into the same "collection", and,
therefore, metadata for particular gene sets are tracked at the collection
level.</p>
<p>Types of metadata being referred to could be things like the organism
that a batch of gene sets were defined in, the type of feature identifiers
that a collection of gene sets are using (ie. <code><a href="https://rdrr.io/pkg/GSEABase/man/GeneIdentifierType-constructors.html" class="external-link">GSEABase::EntrezIdentifier()</a></code>)
or a URL pattern that combines the collection,name compound key that one
can browse to in order to find out more information about the gene set.</p>
<p>There are explicit helper functions that set and get these aforementioned
metadata, namely <code>featureIdType()</code>, <code><a href="geneSetCollectionURLfunction.html">geneSetCollectionURLfunction()</a></code>, and
<code>geneSetURL()</code>. Aribtrary metadata can be stored at the collection level
using the <code>addCollectionMetadata()</code> function. More details are provided
below.</p>
    </div>
    <div id="methods-by-class-">
    <h2>Methods (by class)</h2>
    
<ul><li><p><code>x = GeneSetDb,collection = missing,name = missing</code>: Returns metadata for all collections</p></li>
<li><p><code>x = GeneSetDb,collection = character,name = missing</code>: Returns all metadata for a specific collection</p></li>
<li><p><code>x = GeneSetDb,collection = character,name = character</code>: Returns the <code>name</code> metadata value for a given
<code>collection</code>.</p></li>
<li><p><code>GeneSetDb</code>: returns the URL for a geneset</p></li>
<li><p><code>GeneSetDb</code>: sets the feature id type for a collection</p></li>
<li><p><code>GeneSetDb</code>: retrieves the feature id type for a collection</p></li>
<li><p><code>SparrowResult</code>: returns the URL for a geneset from a
SparrowResult object</p></li>
</ul></div>
    <div id="gene-set-urls">
    <h2>Gene Set URLs</h2>
    


<p>A URL function can be defined per collection that takes the collection,name
compound key and generates a URL for the gene set that the user can browse
to for futher information. For instance, the
<code><a href="geneSetCollectionURLfunction.html">geneSetCollectionURLfunction()</a></code> for the MSigDB collections are defined
like so:</p><div class="sourceCode"><pre><code><span class="va">url.fn</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">collection</span>, <span class="va">name</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">url</span> <span class="op">&lt;-</span> <span class="st">'http://www.broadinstitute.org/gsea/msigdb/cards/%s.html'</span>
  <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="va">url</span>, <span class="va">name</span><span class="op">)</span>
<span class="op">}</span>
<span class="va">gdb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getMSigCollection.html">getMSigGeneSetDb</a></span><span class="op">(</span><span class="st">'H'</span><span class="op">)</span>
<span class="fu"><a href="../reference/geneSetCollectionURLfunction.html">geneSetCollectionURLfunction</a></span><span class="op">(</span><span class="va">gdb</span>, <span class="st">'H'</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">url.fn</span></code></pre></div>

<p>In this way, a call to <code>geneSetURL(gdb, 'H', 'HALLMARK_ANGIOGENESIS')</code>
will return
http://www.broadinstitute.org/gsea/msigdb/cards/HALLMARK_ANGIOGENESIS.html.</p>
<p>This function is vectorized over <code>i</code> and <code>j</code></p>
    </div>
    <div id="feature-id-types">
    <h2>Feature ID Types</h2>
    


<p>When defining a set of gene sets in a collection, the identifiers used must
be of the same type. Most often you'll probably be working with Entrez
identifiers, simply because that's what most of the annotations work with.</p>
<p>As such, you'd define that your collection uses geneset identifiers like
so:</p><div class="sourceCode"><pre><code><span class="va">gdb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getMSigCollection.html">getMSigGeneSetDb</a></span><span class="op">(</span><span class="st">'H'</span><span class="op">)</span>
<span class="fu"><a href="../reference/collectionMetadata.html">featureIdType</a></span><span class="op">(</span><span class="va">gdb</span>, <span class="st">'H'</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">GSEABase</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/GSEABase/man/GeneIdentifierType-constructors.html" class="external-link">ENSEMBLIdentifier</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">## or, equivalently (but you don't want to use this)</span>
<span class="va">gdb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/collectionMetadata.html">addCollectionMetadata</a></span><span class="op">(</span><span class="va">gdb</span>, <span class="st">'H'</span>, <span class="st">'id_type'</span>, <span class="fu">GSEABase</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/GSEABase/man/GeneIdentifierType-constructors.html" class="external-link">ENSEMBLIdentifier</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>

    </div>
    <div id="adding-arbitrary-collectionmetadata">
    <h2>Adding arbitrary collectionMetadata</h2>
    


<p>Adds arbitrary metadata to a gene set collection of a GeneSetDb</p>
<p>Note that this is not a replacement method! You must catch the returned
object to keep the one with the updated <code>collectionMetadata</code>. Although this
function is exported, I imagine this being used mostly through predefined
replace methods that use this as a utility function, such as the replacement
methods <code>featureIdType&lt;-</code>, <code>geneSetURLfunction&lt;-</code>, etc.</p><div class="sourceCode"><pre><code><span class="va">gdb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getMSigCollection.html">getMSigGeneSetDb</a></span><span class="op">(</span><span class="st">'H'</span><span class="op">)</span>
<span class="va">gdb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/collectionMetadata.html">addCollectionMetadata</a></span><span class="op">(</span><span class="va">gdb</span>, <span class="st">'H'</span>, <span class="st">'foo'</span>, <span class="st">'bar'</span><span class="op">)</span></code></pre></div>

    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">gdb</span> <span class="op">&lt;-</span> <span class="fu"><a href="examples.html">exampleGeneSetDb</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Gene Set URLs</span></span>
<span class="r-in"><span class="fu">geneSetURL</span><span class="op">(</span><span class="va">gdb</span>, <span class="st">'c2'</span>, <span class="st">'BIOCARTA_AGPCR_PATHWAY'</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                            c2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "http://www.broadinstitute.org/gsea/msigdb/cards/BIOCARTA_AGPCR_PATHWAY.html" </span>
<span class="r-in"><span class="fu">geneSetURL</span><span class="op">(</span><span class="va">gdb</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'c2'</span>, <span class="st">'c7'</span><span class="op">)</span>,</span>
<span class="r-in">           <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'BIOCARTA_AGPCR_PATHWAY'</span>, <span class="st">'GSE14308_TH2_VS_TH1_UP'</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                            c2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "http://www.broadinstitute.org/gsea/msigdb/cards/BIOCARTA_AGPCR_PATHWAY.html" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                            c7 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "http://www.broadinstitute.org/gsea/msigdb/cards/GSE14308_TH2_VS_TH1_UP.html" </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># feature id types</span></span>
<span class="r-in"><span class="fu">featureIdType</span><span class="op">(</span><span class="va">gdb</span>, <span class="st">"c2"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">GSEABase</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/GSEABase/man/GeneIdentifierType-constructors.html" class="external-link">EntrezIdentifier</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">featureIdType</span><span class="op">(</span><span class="va">gdb</span>, <span class="st">"c2"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> geneIdType: EntrezId</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Arbitrary metadata</span></span>
<span class="r-in"><span class="va">gdb</span> <span class="op">&lt;-</span> <span class="fu">addCollectionMetadata</span><span class="op">(</span><span class="va">gdb</span>, <span class="st">'c2'</span>, <span class="st">'foo'</span>, <span class="st">'bar'</span><span class="op">)</span></span>
<span class="r-in"><span class="va">cmh</span> <span class="op">&lt;-</span> <span class="fu">collectionMetadata</span><span class="op">(</span><span class="va">gdb</span>, <span class="st">'c2'</span>, as.dt <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co">## print this to see</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Steve Lianoglou, Denali Therapeutics, Genentech.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

