<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Converts internal feature identifiers in a GeneSetDb to a set of new ones. — convertIdentifiers • sparrow</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Converts internal feature identifiers in a GeneSetDb to a set of new ones. — convertIdentifiers"><meta property="og:description" content="The various GeneSetDb data providers (MSigDb, KEGG, etc). limit the
identifier types that they return. Use this function to map the given
identifiers to whichever type you like."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sparrow</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.9.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/sparrow.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/WIP/adding-new-methods-to-sparrow.html">Adding new methods to sparrow</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/lianos/sparrow/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Converts internal feature identifiers in a GeneSetDb to a set of new ones.</h1>
    <small class="dont-index">Source: <a href="https://github.com/lianos/sparrow/blob/HEAD/R/convertIdentifiers.R" class="external-link"><code>R/convertIdentifiers.R</code></a></small>
    <div class="hidden name"><code>convertIdentifiers.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The various GeneSetDb data providers (MSigDb, KEGG, etc). limit the
identifier types that they return. Use this function to map the given
identifiers to whichever type you like.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">convertIdentifiers</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  from <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  to <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id.type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ensembl"</span>, <span class="st">"entrez"</span>, <span class="st">"symbol"</span><span class="op">)</span>,</span>
<span>  xref <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  extra.cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  allow.cartesian <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  min_support <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  top <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for BiocSet</span></span>
<span><span class="fu">convertIdentifiers</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  from <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  to <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id.type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ensembl"</span>, <span class="st">"entrez"</span>, <span class="st">"symbol"</span><span class="op">)</span>,</span>
<span>  xref <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  extra.cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  allow.cartesian <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  min_support <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  top <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for GeneSetDb</span></span>
<span><span class="fu">convertIdentifiers</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  from <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  to <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id.type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ensembl"</span>, <span class="st">"entrez"</span>, <span class="st">"symbol"</span><span class="op">)</span>,</span>
<span>  xref <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  extra.cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  allow.cartesian <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  min_support <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  top <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>The GeneSetDb with identifiers to convert</p></dd>


<dt>from, to</dt>
<dd><p>If you are doing identifier and/orspecies conversion using
babelgene, <code>to</code> is the species you want to convert to, and <code>from</code> is the
species of <code>x</code>. If you are only doing id type conversion within the same
species, specify the current species in <code>from</code>.
If you are providing a data.frame map of identifiers in <code>xref</code>, <code>to</code> is
the name of the column that holds the new identifiers, and <code>from</code> is the
name of the column that holds the current identifiers.</p></dd>


<dt>id.type</dt>
<dd><p>If you are using babelgene conversion, this specifies the
type of identifier you want to convert to. It can be any of <code>"ensembl"</code>,
<code>"entrez"</code>, or <code>"symbol"</code>.</p></dd>


<dt>xref</dt>
<dd><p>a data.frame used to map current identifiers to target ones.</p></dd>


<dt>extra.cols</dt>
<dd><p>a character vector of columns from <code>to</code> to add to the
features of the new GeneSetDb. If you want to keep the original identifiers
of the remapped features, include <code>"original_id"</code> as one of the values
here.</p></dd>


<dt>allow.cartesian</dt>
<dd><p>a boolean used to temporarily set the
<code>datatable.allow.cartesian</code> global option. If you are doing a 1:many
map of your identifiers, you may trigger this error. You can temporarily
turn this option/error off by setting <code>allow.cartesian = TRUE</code>. The
option will be restored to its "pre-function call" value <code>on.exit</code>.</p></dd>


<dt>min_support, top</dt>
<dd><p>Parameters used in the internal call to
<code><a href="https://igordot.github.io/babelgene/reference/orthologs.html" class="external-link">babelgene::orthologs()</a></code></p></dd>


<dt>...</dt>
<dd><p>pass through args (not used)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A new GeneSetDb object with converted identifiers. We try to retain
any metadata in the original object, but no guarantees are given. If
<code>id_type</code> was stored previously in the collectionMetadata, that will be
dropped.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>For best results, provide your own identifier mapping reference, but we
provide a convenience wrapper around the <code><a href="https://igordot.github.io/babelgene/reference/orthologs.html" class="external-link">babelgene::orthologs()</a></code> function to
change between identifier types and species.</p>
<p>When there are multiple target id's for the source id, they will all be
returned. When there is no target id for the source id, the soucre feature
will be axed.</p>
    </div>
    <div id="methods-by-class-">
    <h2>Methods (by class)</h2>
    
<ul><li><p><code>convertIdentifiers(BiocSet)</code>: converts identifiers in a BiocSet</p></li>
<li><p><code>convertIdentifiers(GeneSetDb)</code>: converts identifiers in a GeneSetDb</p></li>
</ul></div>
    <div id="custom-mapping">
    <h2>Custom Mapping</h2>
    

<p>You need to provide a data.frame via the <code>xref</code> paramater that has a column
for the current identifiers and another column for the target identifiers.
The columns are specified by the <code>from</code> and <code>to</code> paramters, respectively.</p>
    </div>
    <div id="convenience-identifier-and-species-mapping">
    <h2>Convenience identifier and species mapping</h2>
    

<p>If you don't provide a data.frame, you can provide a species name. We will
rely on the babelgene package for the conversion, so you will have to
provide a species name that it recognizes.</p>
    </div>
    <div id="species-and-identifier-conversion-via-babelgene">
    <h2>Species and Identifier Conversion via babelgene</h2>
    

<p>We plan to provide a quick wrapper to babelgene's ortholog mapping function
to make identifier conversion a easier through this function. You can track
this in <a href="https://github.com/lianos/sparrow/issues/2" class="external-link">sparrow issue #2</a>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># You can convert the identifiers within a GeneSetDb to some other type</span></span></span>
<span class="r-in"><span><span class="co"># by providing a "translation" table. Check out the unit tests for more</span></span></span>
<span class="r-in"><span><span class="co"># examples.</span></span></span>
<span class="r-in"><span><span class="va">gdb</span> <span class="op">&lt;-</span> <span class="fu"><a href="examples.html">exampleGeneSetDb</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># this has no symbols in it</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define a silly conversion table.</span></span></span>
<span class="r-in"><span><span class="va">xref</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  current_id <span class="op">=</span> <span class="fu"><a href="featureIds.html">featureIds</a></span><span class="op">(</span><span class="va">gdb</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  new_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="featureIds.html">featureIds</a></span><span class="op">(</span><span class="va">gdb</span><span class="op">)</span>, <span class="st">"_symbol"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gdb2</span> <span class="op">&lt;-</span> <span class="fu">convertIdentifiers</span><span class="op">(</span><span class="va">gdb</span>, from <span class="op">=</span> <span class="st">"current_id"</span>, to <span class="op">=</span> <span class="st">"new_id"</span>,</span></span>
<span class="r-in"><span>                           xref <span class="op">=</span> <span class="va">xref</span>, extra.cols <span class="op">=</span> <span class="st">"original_id"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="geneSet.html">geneSet</a></span><span class="op">(</span><span class="va">gdb2</span>, name <span class="op">=</span> <span class="st">"BIOCARTA_AGPCR_PATHWAY"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    collection                   name active  N  n  feature_id original_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 2778_symbol        2778</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 2782_symbol        2782</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3          c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 2792_symbol        2792</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 2868_symbol        2868</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5          c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA  408_symbol         408</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6          c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 5567_symbol        5567</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7          c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 5568_symbol        5568</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8          c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 5573_symbol        5573</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9          c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 5575_symbol        5575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10         c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 5576_symbol        5576</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11         c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 5577_symbol        5577</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12         c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 5578_symbol        5578</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13         c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 5579_symbol        5579</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert entrez to ensembl id's using babelgene</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># The conversion functionality via babelgene isn't yet implemented, but</span></span></span>
<span class="r-in"><span><span class="co"># will look like this.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 1. convert the human entrez identifiers to ensembl</span></span></span>
<span class="r-in"><span><span class="va">gdb.ens</span> <span class="op">&lt;-</span> <span class="fu">convertIdentifiers</span><span class="op">(</span><span class="va">gdb</span>, <span class="st">"human"</span>, id.type <span class="op">=</span> <span class="st">"ensembl"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 2. convert the human entrez to mouse entrez</span></span></span>
<span class="r-in"><span><span class="va">gdb.entm</span> <span class="op">&lt;-</span> <span class="fu">convertIdentifiers</span><span class="op">(</span><span class="va">gdb</span>, <span class="st">"human"</span>, <span class="st">"mouse"</span>, id.type <span class="op">=</span> <span class="st">"entrez"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 3. convert the human entrez to mouse ensembl</span></span></span>
<span class="r-in"><span><span class="va">gdb.ensm</span> <span class="op">&lt;-</span> <span class="fu">convertIdentifiers</span><span class="op">(</span><span class="va">gdb</span>, <span class="st">"human"</span>, <span class="st">"mouse"</span>, id.type <span class="op">=</span> <span class="st">"ensembl"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Steve Lianoglou, Aratus Informatics, LLC, Denali Therapeutics, Genentech.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

