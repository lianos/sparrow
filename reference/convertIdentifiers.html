<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Converts internal feature identifiers in a GeneSetDb to a set of new ones. — convertIdentifiers • sparrow</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Converts internal feature identifiers in a GeneSetDb to a set of new ones. — convertIdentifiers" />
<meta property="og:description" content="The various GeneSetDb data providers (MSigDb, KEGG, etc). limit the
identifier types that they return. Use this function to map the given
identifiers to whichever type you like." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sparrow</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.99.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/sparrow.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/WIP/adding-new-methods-to-sparrow.html">Adding new methods to sparrow</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Converts internal feature identifiers in a GeneSetDb to a set of new ones.</h1>
    
    <div class="hidden name"><code>convertIdentifiers.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The various GeneSetDb data providers (MSigDb, KEGG, etc). limit the
identifier types that they return. Use this function to map the given
identifiers to whichever type you like.</p>
    </div>

    <pre class="usage"><span class='fu'>convertIdentifiers</span><span class='op'>(</span>
  <span class='va'>x</span>,
  from <span class='op'>=</span> <span class='cn'>NULL</span>,
  to <span class='op'>=</span> <span class='cn'>NULL</span>,
  id.type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ensembl"</span>, <span class='st'>"entrez"</span>, <span class='st'>"symbol"</span><span class='op'>)</span>,
  xref <span class='op'>=</span> <span class='cn'>NULL</span>,
  extra.cols <span class='op'>=</span> <span class='cn'>NULL</span>,
  allow.cartesian <span class='op'>=</span> <span class='cn'>FALSE</span>,
  min_support <span class='op'>=</span> <span class='fl'>3</span>,
  top <span class='op'>=</span> <span class='cn'>TRUE</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='co'># S4 method for BiocSet</span>
<span class='fu'>convertIdentifiers</span><span class='op'>(</span>
  <span class='va'>x</span>,
  from <span class='op'>=</span> <span class='cn'>NULL</span>,
  to <span class='op'>=</span> <span class='cn'>NULL</span>,
  id.type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ensembl"</span>, <span class='st'>"entrez"</span>, <span class='st'>"symbol"</span><span class='op'>)</span>,
  xref <span class='op'>=</span> <span class='cn'>NULL</span>,
  extra.cols <span class='op'>=</span> <span class='cn'>NULL</span>,
  allow.cartesian <span class='op'>=</span> <span class='cn'>FALSE</span>,
  min_support <span class='op'>=</span> <span class='fl'>3</span>,
  top <span class='op'>=</span> <span class='cn'>TRUE</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='co'># S4 method for GeneSetDb</span>
<span class='fu'>convertIdentifiers</span><span class='op'>(</span>
  <span class='va'>x</span>,
  from <span class='op'>=</span> <span class='cn'>NULL</span>,
  to <span class='op'>=</span> <span class='cn'>NULL</span>,
  id.type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ensembl"</span>, <span class='st'>"entrez"</span>, <span class='st'>"symbol"</span><span class='op'>)</span>,
  xref <span class='op'>=</span> <span class='cn'>NULL</span>,
  extra.cols <span class='op'>=</span> <span class='cn'>NULL</span>,
  allow.cartesian <span class='op'>=</span> <span class='cn'>FALSE</span>,
  min_support <span class='op'>=</span> <span class='fl'>3</span>,
  top <span class='op'>=</span> <span class='cn'>TRUE</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>The GeneSetDb with identifiers to convert</p></td>
    </tr>
    <tr>
      <th>from, to</th>
      <td><p>If you are doing identifier and/orspecies conversion using
babelgene, <code>to</code> is the species you want to convert to, and <code>from</code> is the
species of <code>x</code>. If you are only doing id type conversion within the same
species, specify the current species in <code>from</code>.
If you are providing a data.frame map of identifiers in <code>xref</code>, <code>to</code> is
the name of the column that holds the new identifiers, and <code>from</code> is the
name of the column that holds the current identifiers.</p></td>
    </tr>
    <tr>
      <th>id.type</th>
      <td><p>If you are using babelgene conversion, this specifies the
type of identifier you want to convert to. It can be any of <code>"ensembl"</code>,
<code>"entrez"</code>, or <code>"symbol"</code>.</p></td>
    </tr>
    <tr>
      <th>xref</th>
      <td><p>a data.frame used to map current identifiers to target ones.</p></td>
    </tr>
    <tr>
      <th>extra.cols</th>
      <td><p>a character vector of columns from <code>to</code> to add to the
features of the new GeneSetDb. If you want to keep the original identifiers
of the remapped features, include <code>"original_id"</code> as one of the values
here.</p></td>
    </tr>
    <tr>
      <th>allow.cartesian</th>
      <td><p>a boolean used to temporarily set the
<code>datatable.allow.cartesian</code> global option. If you are doing a 1:many
map of your identifiers, you may trigger this error. You can temporarily
turn this option/error off by setting <code>allow.cartesian = TRUE</code>. The
option will be restored to its "pre-function call" value <code>on.exit</code>.</p></td>
    </tr>
    <tr>
      <th>min_support, top</th>
      <td><p>Parameters used in the internal call to
<code><a href='https://igordot.github.io/babelgene/reference/orthologs.html'>babelgene::orthologs()</a></code></p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>pass through args (not used)</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A new GeneSetDb object with converted identifiers. We try to retain
any metadata in the original object, but no guarantees are given. If
<code>id_type</code> was stored previously in the collectionMetadata, that will be
dropped.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>For best results, provide your own identifier mapping reference, but we
provide a convenience wrapper around the <code><a href='https://igordot.github.io/babelgene/reference/orthologs.html'>babelgene::orthologs()</a></code> function to
change between identifier types and species.</p>
<p>When there are multiple target id's for the source id, they will all be
returned. When there is no target id for the source id, the soucre feature
will be axed.</p>
    <h2 class="hasAnchor" id="methods-by-class-"><a class="anchor" href="#methods-by-class-"></a>Methods (by class)</h2>

    
<ul>
<li><p><code>BiocSet</code>: converts identifiers in a BiocSet</p></li>
<li><p><code>GeneSetDb</code>: converts identifiers in a GeneSetDb</p></li>
</ul>
    <h2 class="hasAnchor" id="custom-mapping"><a class="anchor" href="#custom-mapping"></a>Custom Mapping</h2>

    

<p>You need to provide a data.frame via the <code>xref</code> paramater that has a column
for the current identifiers and another column for the target identifiers.
The columns are specified by the <code>from</code> and <code>to</code> paramters, respectively.</p>
    <h2 class="hasAnchor" id="convenience-identifier-and-species-mapping"><a class="anchor" href="#convenience-identifier-and-species-mapping"></a>Convenience identifier and species mapping</h2>

    

<p>If you don't provide a data.frame, you can provide a species name. We will
rely on the babelgene package for the conversion, so you will have to
provide a species name that it recognizes.</p>
    <h2 class="hasAnchor" id="species-and-identifier-conversion-via-babelgene"><a class="anchor" href="#species-and-identifier-conversion-via-babelgene"></a>Species and Identifier Conversion via babelgene</h2>

    

<p>We plan to provide a quick wrapper to babelgene's ortholog mapping function
to make identifier conversion a easier through this function. You can track
this in <a href='https://github.com/lianos/sparrow/issues/2'>sparrow issue #2</a>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># You can convert the identifiers within a GeneSetDb to some other type</span>
<span class='co'># by providing a "translation" table. Check out the unit tests for more</span>
<span class='co'># examples.</span>
<span class='va'>gdb</span> <span class='op'>&lt;-</span> <span class='fu'><a href='exampleExpressionSet.html'>exampleGeneSetDb</a></span><span class='op'>(</span><span class='op'>)</span> <span class='co'># this has no symbols in it</span>

<span class='co'># Define a silly conversion table.</span>
<span class='va'>xref</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>
  current_id <span class='op'>=</span> <span class='fu'><a href='featureIds.html'>featureIds</a></span><span class='op'>(</span><span class='va'>gdb</span><span class='op'>)</span>,
  new_id <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'><a href='featureIds.html'>featureIds</a></span><span class='op'>(</span><span class='va'>gdb</span><span class='op'>)</span>, <span class='st'>"_symbol"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>gdb2</span> <span class='op'>&lt;-</span> <span class='fu'>convertIdentifiers</span><span class='op'>(</span><span class='va'>gdb</span>, from <span class='op'>=</span> <span class='st'>"current_id"</span>, to <span class='op'>=</span> <span class='st'>"new_id"</span>,
                           xref <span class='op'>=</span> <span class='va'>xref</span>, extra.cols <span class='op'>=</span> <span class='st'>"original_id"</span><span class='op'>)</span>
<span class='fu'><a href='geneSet.html'>geneSet</a></span><span class='op'>(</span><span class='va'>gdb2</span>, name <span class='op'>=</span> <span class='st'>"BIOCARTA_AGPCR_PATHWAY"</span><span class='op'>)</span>
</div><div class='output co'>#&gt;    collection                   name active  N  n  feature_id original_id
#&gt; 1          c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 2778_symbol        2778
#&gt; 2          c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 2782_symbol        2782
#&gt; 3          c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 2792_symbol        2792
#&gt; 4          c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 2868_symbol        2868
#&gt; 5          c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA  408_symbol         408
#&gt; 6          c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 5567_symbol        5567
#&gt; 7          c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 5568_symbol        5568
#&gt; 8          c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 5573_symbol        5573
#&gt; 9          c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 5575_symbol        5575
#&gt; 10         c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 5576_symbol        5576
#&gt; 11         c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 5577_symbol        5577
#&gt; 12         c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 5578_symbol        5578
#&gt; 13         c2 BIOCARTA_AGPCR_PATHWAY  FALSE 13 NA 5579_symbol        5579</div><div class='input'>
<span class='co'># Convert entrez to ensembl id's using babelgene</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># The conversion functionality via babelgene isn't yet implemented, but</span>
<span class='co'># will look like this.</span>

<span class='co'># 1. convert the human entrez identifiers to ensembl</span>
<span class='va'>gdb.ens</span> <span class='op'>&lt;-</span> <span class='fu'>convertIdentifiers</span><span class='op'>(</span><span class='va'>gdb</span>, <span class='st'>"human"</span>, id.type <span class='op'>=</span> <span class='st'>"ensembl"</span><span class='op'>)</span>

<span class='co'># 2. convert the human entrez to mouse entrez</span>
<span class='va'>gdb.entm</span> <span class='op'>&lt;-</span> <span class='fu'>convertIdentifiers</span><span class='op'>(</span><span class='va'>gdb</span>, <span class='st'>"human"</span>, <span class='st'>"mouse"</span>, id.type <span class='op'>=</span> <span class='st'>"entrez"</span><span class='op'>)</span>

<span class='co'># 3. convert the human entrez to mouse ensembl</span>
<span class='va'>gdb.ensm</span> <span class='op'>&lt;-</span> <span class='fu'>convertIdentifiers</span><span class='op'>(</span><span class='va'>gdb</span>, <span class='st'>"human"</span>, <span class='st'>"mouse"</span>, id.type <span class='op'>=</span> <span class='st'>"ensembl"</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Steve Lianoglou, Denali Therapeutics, Genentech.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


